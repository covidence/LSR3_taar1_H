forest(`meta_comp_taar1_vs_antipsychotic_1 day-2 weeks_dizziness`,
col.diamond = "firebrick4",
col.square =   "firebrick3",
label.c="amisulpride",
rightcols = c("effect", "ci", "Overall"),rightlabs = c("OR", "95%-CI", "Risk of bias"),
xlim=c(0.2,5),
label.e = unique(`meta_comp_taar1_vs_antipsychotic_1 day-2 weeks_dizziness`$data$treat1_new),
subgroup.hetstat = TRUE, overall.hetstat =FALSE, test.subgroup.random = FALSE,test.subgroup.fixed = FALSE,
overall = FALSE, prediction.subgroup = FALSE,
subgroup = TRUE, fixed=TRUE,
label.left = "TAAR1 better", label.right="Antipsychotic better")
forest(`meta_comp_taar1_vs_antipsychotic_1 day-2 weeks_dizziness`,
col.diamond = "firebrick4",
col.square =   "firebrick3",
label.c="amisulpride",
rightcols = c("effect", "ci", "Overall"),rightlabs = c("OR", "95%-CI", "Risk of bias"),
# xlim=c(0.2,5),
label.e = unique(`meta_comp_taar1_vs_antipsychotic_1 day-2 weeks_dizziness`$data$treat1_new),
subgroup.hetstat = TRUE, overall.hetstat =FALSE, test.subgroup.random = FALSE,test.subgroup.fixed = FALSE,
overall = FALSE, prediction.subgroup = FALSE,
subgroup = TRUE, fixed=TRUE,
label.left = "TAAR1 better", label.right="Antipsychotic better")
forest(`meta_comp_taar1_vs_antipsychotic_1 day-2 weeks_nausea_vomitting`,
col.diamond = "firebrick4",
col.square =   "firebrick3",
label.c="amisulpride",
rightcols = c("effect", "ci", "Overall"),rightlabs = c("OR", "95%-CI", "Risk of bias"),
xlim=c(0.2,5),
label.e = unique(`meta_comp_taar1_vs_antipsychotic_1 day-2 weeks_nausea_vomitting`$data$treat1_new),
subgroup.hetstat = TRUE, overall.hetstat =FALSE, test.subgroup.random = FALSE,test.subgroup.fixed = FALSE,
overall = FALSE, prediction.subgroup = FALSE,
subgroup = TRUE, fixed=TRUE,
label.left = "TAAR1 better", label.right="Antipsychotic better")
forest(`meta_comp_taar1_vs_antipsychotic_1 day-2 weeks_nausea_vomitting`,
col.diamond = "firebrick4",
col.square =   "firebrick3",
label.c="amisulpride",
rightcols = c("effect", "ci", "Overall"),rightlabs = c("OR", "95%-CI", "Risk of bias"),
# xlim=c(0.2,5),
label.e = unique(`meta_comp_taar1_vs_antipsychotic_1 day-2 weeks_nausea_vomitting`$data$treat1_new),
subgroup.hetstat = TRUE, overall.hetstat =FALSE, test.subgroup.random = FALSE,test.subgroup.fixed = FALSE,
overall = FALSE, prediction.subgroup = FALSE,
subgroup = TRUE, fixed=TRUE,
label.left = "TAAR1 better", label.right="Antipsychotic better")
forest(`meta_comp_taar1_vs_antipsychotic_3-13 weeks_weight_increased`,
col.diamond = "firebrick4",
col.square =   "firebrick3",
rightcols = c("effect", "ci","Overall"),
rightlabs = c("OR", "95%-CI", "Risk of bias"),
label.c = "risperidone",
xlim=c(0.2,5),
label.e = unique(`meta_comp_taar1_vs_antipsychotic_3-13 weeks_weight_increased`$data$treat1_new),
subgroup.hetstat = TRUE, overall.hetstat =FALSE, test.subgroup.random = FALSE,test.subgroup.fixed = FALSE,
overall = FALSE, prediction.subgroup = FALSE,
subgroup = TRUE, fixed=TRUE,
label.left = "TAAR1 better", label.right="Antipsychotic better")
forest(`meta_comp_taar1_vs_antipsychotic_3-13 weeks_weight_increased`,
col.diamond = "firebrick4",
col.square =   "firebrick3",
rightcols = c("effect", "ci","Overall"),
rightlabs = c("OR", "95%-CI", "Risk of bias"),
label.c = "risperidone",
# xlim=c(0.2,5),
label.e = unique(`meta_comp_taar1_vs_antipsychotic_3-13 weeks_weight_increased`$data$treat1_new),
subgroup.hetstat = TRUE, overall.hetstat =FALSE, test.subgroup.random = FALSE,test.subgroup.fixed = FALSE,
overall = FALSE, prediction.subgroup = FALSE,
subgroup = TRUE, fixed=TRUE,
label.left = "TAAR1 better", label.right="Antipsychotic better")
outcome_categories<-outcome_names %>%
select(outcome, event_text)
efficacy_primary_2<-meta_outcome %>% left_join(outcome_categories) %>%
filter(outcome=="cognition" | outcome=="depression" | outcome=="negative" | outcome=="overall" | outcome=="positive") %>% #efficacy outcome
filter(!is.na(TE.random)) %>% filter(!is.na(event_text)) %>%
mutate(point=TE.random,
lb=TE.random-1.96*seTE.random,
ub=TE.random+1.96*seTE.random) %>%
unique() %>%
filter(comparison=="taar1_vs_antipsychotic")
efficacy_primary_2$population <- factor(efficacy_primary_2$population, levels=unique(efficacy_primary_2$population))
efficacy_primary_2$event_text <- factor(efficacy_primary_2$event_tex, levels=unique(efficacy_primary_2$event_tex))
level_outcomes<- c("Overall symptoms", "Positive symptoms", "Negative symptoms", "Depressive symptoms", "Cognitive impairement")
level_population<-c("Schizophrenia spectrum", "Parkinson Disease Psychosis")
ggplot(data=efficacy_primary_2,
aes(y=factor(event_text, level=rev(level_outcomes)), x=point))+
geom_point(size=3.4,position=position_dodge(width = 0.5), colour="royalblue4")+ #Size proportional to the number of participants
coord_cartesian(xlim=c(-0.8,0.8))+
geom_errorbar(aes(x=point, xmin=lb,
xmax=ub),
width=0, position=position_dodge(width = 0.5), colour="royalblue4")+
scale_size_continuous(guide=FALSE)+
geom_vline(xintercept=0, linetype='dashed')+
facet_grid(~factor(population, levels=level_population))+
ylab("")+
xlab("SMD 95%CI (SMD>0: TAAR1 agonists better)")+
theme_bw()
forest(`meta_comp_taar1_vs_antipsychotic_3-13 weeks_agitation`,
col.diamond = "firebrick4",
col.square =   "firebrick3",
rightcols = c("effect", "ci","Overall"),
rightlabs = c("OR", "95%-CI", "Risk of bias"),
label.c = "risperidone",
xlim=c(0.2,5),
label.e = unique(`meta_comp_taar1_vs_antipsychotic_3-13 weeks_agitation`$data$treat1_new),
subgroup.hetstat = TRUE, overall.hetstat =FALSE, test.subgroup.random = FALSE,test.subgroup.fixed = FALSE,
overall = FALSE, prediction.subgroup = FALSE,
subgroup = TRUE, fixed=TRUE,
label.left = "TAAR1 better", label.right="Antipsychotic better")
forest(`meta_comp_taar1_vs_antipsychotic_3-13 weeks_agitation`,
col.diamond = "firebrick4",
col.square =   "firebrick3",
rightcols = c("effect", "ci","Overall"),
rightlabs = c("OR", "95%-CI", "Risk of bias"),
label.c = "risperidone",
#xlim=c(0.2,5),
label.e = unique(`meta_comp_taar1_vs_antipsychotic_3-13 weeks_agitation`$data$treat1_new),
subgroup.hetstat = TRUE, overall.hetstat =FALSE, test.subgroup.random = FALSE,test.subgroup.fixed = FALSE,
overall = FALSE, prediction.subgroup = FALSE,
subgroup = TRUE, fixed=TRUE,
label.left = "TAAR1 better", label.right="Antipsychotic better")
forest(`meta_comp_taar1_vs_antipsychotic_1 day-2 weeks_anxiety`,
col.diamond = "firebrick4",
col.square =   "firebrick3",
label.c="amisulpride",
rightcols = c("effect", "ci", "Overall"),rightlabs = c("OR", "95%-CI", "Risk of bias"),
xlim=c(0.2,5),
label.e = unique(`meta_comp_taar1_vs_antipsychotic_1 day-2 weeks_anxiety`$data$treat1_new),
subgroup.hetstat = TRUE, overall.hetstat =FALSE, test.subgroup.random = FALSE,test.subgroup.fixed = FALSE,
overall = FALSE, prediction.subgroup = FALSE,
subgroup = TRUE, fixed=TRUE,
label.left = "TAAR1 better", label.right="Antipsychotic better")
forest(`meta_comp_taar1_vs_antipsychotic_1 day-2 weeks_anxiety`,
col.diamond = "firebrick4",
col.square =   "firebrick3",
label.c="amisulpride",
rightcols = c("effect", "ci", "Overall"),rightlabs = c("OR", "95%-CI", "Risk of bias"),
#xlim=c(0.2,5),
label.e = unique(`meta_comp_taar1_vs_antipsychotic_1 day-2 weeks_anxiety`$data$treat1_new),
subgroup.hetstat = TRUE, overall.hetstat =FALSE, test.subgroup.random = FALSE,test.subgroup.fixed = FALSE,
overall = FALSE, prediction.subgroup = FALSE,
subgroup = TRUE, fixed=TRUE,
label.left = "TAAR1 better", label.right="Antipsychotic better")
forest(`meta_comp_taar1_vs_antipsychotic_3-13 weeks_anxiety`,
col.diamond = "firebrick4",
col.square =   "firebrick3",
rightcols = c("effect", "ci","Overall"),
rightlabs = c("OR", "95%-CI", "Risk of bias"),
label.c = "risperidone",
xlim=c(0.2,5),
label.e = unique(`meta_comp_taar1_vs_antipsychotic_3-13 weeks_anxiety`$data$treat1_new),
subgroup.hetstat = TRUE, overall.hetstat =FALSE, test.subgroup.random = FALSE,test.subgroup.fixed = FALSE,
overall = FALSE, prediction.subgroup = FALSE,
subgroup = TRUE, fixed=TRUE,
label.left = "TAAR1 better", label.right="Antipsychotic better")
forest(`meta_comp_taar1_vs_antipsychotic_1 day-2 weeks_headache`,
col.diamond = "firebrick4",
col.square =   "firebrick3",
label.c="amisulpride",
rightcols = c("effect", "ci", "Overall"),rightlabs = c("OR", "95%-CI", "Risk of bias"),
xlim=c(0.2,5),
label.e = unique(`meta_comp_taar1_vs_antipsychotic_1 day-2 weeks_headache`$data$treat1_new),
subgroup.hetstat = TRUE, overall.hetstat =FALSE, test.subgroup.random = FALSE,test.subgroup.fixed = FALSE,
overall = FALSE, prediction.subgroup = FALSE,
subgroup = TRUE, fixed=TRUE,
label.left = "TAAR1 better", label.right="Antipsychotic better")
forest(`meta_comp_taar1_vs_antipsychotic_1 day-2 weeks_headache`,
col.diamond = "firebrick4",
col.square =   "firebrick3",
label.c="amisulpride",
rightcols = c("effect", "ci", "Overall"),rightlabs = c("OR", "95%-CI", "Risk of bias"),
# xlim=c(0.2,5),
label.e = unique(`meta_comp_taar1_vs_antipsychotic_1 day-2 weeks_headache`$data$treat1_new),
subgroup.hetstat = TRUE, overall.hetstat =FALSE, test.subgroup.random = FALSE,test.subgroup.fixed = FALSE,
overall = FALSE, prediction.subgroup = FALSE,
subgroup = TRUE, fixed=TRUE,
label.left = "TAAR1 better", label.right="Antipsychotic better")
forest(`meta_comp_taar1_vs_antipsychotic_3-13 weeks_headache`,
col.diamond = "firebrick4",
col.square =   "firebrick3",
rightcols = c("effect", "ci","Overall"),
rightlabs = c("OR", "95%-CI", "Risk of bias"),
label.c = "risperidone",
xlim=c(0.2,5),
label.e = unique(`meta_comp_taar1_vs_antipsychotic_3-13 weeks_headache`$data$treat1_new),
subgroup.hetstat = TRUE, overall.hetstat =FALSE, test.subgroup.random = FALSE,test.subgroup.fixed = FALSE,
overall = FALSE, prediction.subgroup = FALSE,
subgroup = TRUE, fixed=TRUE,
label.left = "TAAR1 better", label.right="Antipsychotic better")
forest(`meta_comp_taar1_vs_antipsychotic_1 day-2 weeks_sedation`,
col.diamond = "firebrick4",
col.square =   "firebrick3",
label.c="amisulpride",
rightcols = c("effect", "ci", "Overall"),rightlabs = c("OR", "95%-CI", "Risk of bias"),
xlim=c(0.2,5),
label.e = unique(`meta_comp_taar1_vs_antipsychotic_1 day-2 weeks_sedation`$data$treat1_new),
subgroup.hetstat = TRUE, overall.hetstat =FALSE, test.subgroup.random = FALSE,test.subgroup.fixed = FALSE,
overall = FALSE, prediction.subgroup = FALSE,
subgroup = TRUE, fixed=TRUE,
label.left = "TAAR1 better", label.right="Antipsychotic better")
forest(`meta_comp_taar1_vs_antipsychotic_1 day-2 weeks_sedation`,
col.diamond = "firebrick4",
col.square =   "firebrick3",
label.c="amisulpride",
rightcols = c("effect", "ci", "Overall"),rightlabs = c("OR", "95%-CI", "Risk of bias"),
# xlim=c(0.2,5),
label.e = unique(`meta_comp_taar1_vs_antipsychotic_1 day-2 weeks_sedation`$data$treat1_new),
subgroup.hetstat = TRUE, overall.hetstat =FALSE, test.subgroup.random = FALSE,test.subgroup.fixed = FALSE,
overall = FALSE, prediction.subgroup = FALSE,
subgroup = TRUE, fixed=TRUE,
label.left = "TAAR1 better", label.right="Antipsychotic better")
forest(`meta_comp_taar1_vs_antipsychotic_3-13 weeks_insomnia`,
col.diamond = "firebrick4",
col.square =   "firebrick3",
rightcols = c("effect", "ci","Overall"),
rightlabs = c("OR", "95%-CI", "Risk of bias"),
label.c = "risperidone",
xlim=c(0.2,5),
label.e = unique(`meta_comp_taar1_vs_antipsychotic_3-13 weeks_insomnia`$data$treat1_new),
subgroup.hetstat = TRUE, overall.hetstat =FALSE, test.subgroup.random = FALSE,test.subgroup.fixed = FALSE,
overall = FALSE, prediction.subgroup = FALSE,
subgroup = TRUE, fixed=TRUE,
label.left = "TAAR1 better", label.right="Antipsychotic better")
safety_primary<-meta_outcome %>% left_join(ae_categories) %>%
mutate(event_text=ifelse(outcome=="death", "Mortality",
ifelse(outcome=="serious", "Serious event",
ifelse(outcome=="dropout_any", "Dropouts any reason",
ifelse(outcome=="dropout_ae", "Dropouts adverse event", event_text)))),
MedDRA_group=ifelse(outcome=="death" | outcome=="serious", "serious",
ifelse(outcome=="dropout_any" | outcome=="dropout_ae", "dropouts", MedDRA_group))) %>%
filter(!is.na(TE.random)) %>% filter(!is.na(event_text)) %>%  #May need to be revised a bit
mutate(point=TE.random,
lb=TE.random-1.96*seTE.random,
ub=TE.random+1.96*seTE.random) %>% unique() %>%
filter(comparison=="taar1_vs_antipsychotic")
safety_primary_timepoint<-safety_primary %>% filter(timepoint=="3-13 weeks")
safety_primary_plot <-safety_primary %>% filter(event_text %in% safety_primary_timepoint$event_text)
safety_primary_plot$event_text <- factor(safety_primary_plot$event_tex, levels=unique(safety_primary_plot$event_tex))
level_order<- sort(unique(safety_primary_plot$event_text))
lever_order_meddra<-c("dropouts", "any", "serious", "autonomic", "endocrinic", "neuromuscular", "neuropsychiatric")
safety_primary_plot$event_text <- factor(safety_primary_plot$event_tex, levels=unique(safety_primary_plot$event_tex))
level_order<- sort(unique(safety_primary_plot$event_text))
lever_order_meddra<-c("dropouts", "any", "serious", "autonomic", "endocrinic", "neuromuscular", "neuropsychiatric")
ggplot(data=safety_primary_plot,
aes(y=factor(event_text, level=rev(level_order)), x=exp(point), colour=timepoint))+
geom_point(position=position_dodge(width = 0.5))+
geom_errorbar(aes(x=exp(point), xmin=exp(TE.random-1.96*seTE.random),
xmax=exp(TE.random+1.96*seTE.random), colour=timepoint),
width=0, position=position_dodge(width = 0.5))+
geom_vline(xintercept=1, linetype='dashed')+
facet_grid(factor(MedDRA_group, levels=lever_order_meddra)~., scales = "free", space = "free")+
scale_x_log10() +
ylab("")+
xlab("OR 95%CI")+
theme_bw()
ae_categories<-ae_categories %>%
select(event_text, MedDRA_an, MedDRA_group) %>%
rename(outcome=MedDRA_an)
safety_primary<-meta_outcome %>% left_join(ae_categories) %>%  #I need to change a bit
mutate(event_text=ifelse(outcome=="death", "Mortality",
ifelse(outcome=="serious", "Serious event",
ifelse(outcome=="dropout_any", "Dropouts any reason",
ifelse(outcome=="dropout_ae", "Dropouts adverse event", event_text)))),
MedDRA_group=ifelse(outcome=="death" | outcome=="serious", "serious",
ifelse(outcome=="dropout_any" | outcome=="dropout_ae", "dropouts", MedDRA_group))) %>%
filter(!is.na(TE.random)) %>% filter(!is.na(event_text)) %>%
mutate(point=TE.random,
lb=TE.random-1.96*seTE.random,
ub=TE.random+1.96*seTE.random) %>% unique() %>%
filter(comparison=="taar1_vs_placebo")
safety_primary_plot <-safety_primary #%>% filter(event_text %in% safety_primary_timepoint$event_text)
safety_primary_plot$event_text <- factor(safety_primary_plot$event_tex, levels=unique(safety_primary_plot$event_tex))
level_order<- sort(unique(safety_primary_plot$event_text))
lever_order_meddra<-c("dropouts", "any", "serious", "autonomic", "endocrinic", "neuromuscular", "neuropsychiatric")
safety_primary_plot$event_text <- factor(safety_primary_plot$event_tex, levels=unique(safety_primary_plot$event_tex))
level_order<- sort(unique(safety_primary_plot$event_text))
lever_order_meddra<-c("dropouts", "any", "serious", "autonomic", "endocrinic", "neuromuscular", "neuropsychiatric")
safety_primary_plot<-safety_primary_plot %>% mutate(type_outcome=ifelse(outcome=="dropout_any" | outcome=="dropout_ae", "dropout", "side"))
ggplot(data=safety_primary_plot,
aes(y=factor(event_text, level=rev(level_order)), x=exp(point),colour=type_outcome, shape=timepoint))+
geom_point(aes(size=n), position=position_dodge(width = 0.5))+
geom_errorbar(aes(x=exp(point), xmin=exp(TE.random-1.96*seTE.random),
xmax=exp(TE.random+1.96*seTE.random), colour=type_outcome,shape=timepoint),
width=0, position=position_dodge(width = 0.5))+
geom_vline(xintercept=1, linetype='dashed')+
scale_size_continuous(guide=FALSE)+
facet_grid(factor(MedDRA_group, levels=lever_order_meddra)~., scales = "free", space = "free")+
scale_x_log10() +
ylab("")+
scale_shape_manual(values=c(1,19))+
scale_colour_manual(guide=FALSE, values=c("green4", "firebrick4"))+
xlab("OR 95%CI (OR>1: TAAR1 agonsits worse)")+
theme_bw()
safety_primary_2<-meta_outcome %>% left_join(ae_categories) %>%  #I need to change a bit
mutate(event_text=ifelse(outcome=="death", "Mortality",
ifelse(outcome=="serious", "Serious event",
ifelse(outcome=="dropout_any", "Dropouts any reason",
ifelse(outcome=="dropout_ae", "Dropouts adverse event", event_text)))),
MedDRA_group=ifelse(outcome=="death" | outcome=="serious", "serious",
ifelse(outcome=="dropout_any" | outcome=="dropout_ae", "dropouts", MedDRA_group))) %>%
filter(!is.na(TE.random)) %>% filter(!is.na(event_text)) %>%
mutate(point=TE.random,
lb=TE.random-1.96*seTE.random,
ub=TE.random+1.96*seTE.random) %>% unique() %>%
filter(comparison=="taar1_vs_antipsychotic")
safety_primary_plot_2 <-safety_primary_2
safety_primary_plot_2$event_text <- factor(safety_primary_plot_2$event_tex, levels=unique(safety_primary_plot_2$event_tex))
level_order_2<- sort(unique(safety_primary_plot_2$event_text))
lever_order_meddra<-c("dropouts", "any", "serious", "autonomic", "endocrinic", "neuromuscular", "neuropsychiatric")
safety_primary_plot_2<-safety_primary_plot_2 %>% mutate(type_outcome=ifelse(outcome=="dropout_any" | outcome=="dropout_ae", "dropout", "side"))
ggplot(data=safety_primary_plot_2,
aes(y=factor(event_text, level=rev(level_order_2)), x=exp(point),colour=type_outcome, shape=timepoint))+
geom_point(aes(size=n), position=position_dodge(width = 0.5))+
geom_errorbar(aes(x=exp(point), xmin=exp(TE.random-1.96*seTE.random),
xmax=exp(TE.random+1.96*seTE.random), colour=type_outcome,shape=timepoint),
width=0, position=position_dodge(width = 0.5))+
geom_vline(xintercept=1, linetype='dashed')+
scale_size_continuous(guide=FALSE)+
facet_grid(factor(MedDRA_group, levels=lever_order_meddra)~., scales = "free", space = "free")+
scale_x_log10() +
ylab("")+
scale_shape_manual(values=c(1,19))+
scale_colour_manual(guide=FALSE, values=c("green4", "firebrick4"))+
xlab("OR 95%CI (OR>1: TAAR1 agonsits worse)")+
theme_bw()
ggplot(data=safety_primary_plot_2,
aes(y=factor(event_text, level=rev(level_order_2)), x=exp(point),colour=type_outcome, shape=timepoint))+
geom_point(aes(size=n/3), position=position_dodge(width = 0.5))+
geom_errorbar(aes(x=exp(point), xmin=exp(TE.random-1.96*seTE.random),
xmax=exp(TE.random+1.96*seTE.random), colour=type_outcome,shape=timepoint),
width=0, position=position_dodge(width = 0.5))+
geom_vline(xintercept=1, linetype='dashed')+
scale_size_continuous(guide=FALSE)+
facet_grid(factor(MedDRA_group, levels=lever_order_meddra)~., scales = "free", space = "free")+
scale_x_log10() +
ylab("")+
scale_shape_manual(values=c(1,19))+
scale_colour_manual(guide=FALSE, values=c("green4", "firebrick4"))+
xlab("OR 95%CI (OR>1: TAAR1 agonsits worse)")+
theme_bw()
ggplot(data=safety_primary_plot_2,
aes(y=factor(event_text, level=rev(level_order_2)), x=exp(point),colour=type_outcome, shape=timepoint))+
geom_point(aes(size=n), position=position_dodge(width = 0.5))+
geom_errorbar(aes(x=exp(point), xmin=exp(TE.random-1.96*seTE.random),
xmax=exp(TE.random+1.96*seTE.random), colour=type_outcome,shape=timepoint),
width=0, position=position_dodge(width = 0.5))+
geom_vline(xintercept=1, linetype='dashed')+
scale_size_continuous(guide=FALSE, values=log10)+
facet_grid(factor(MedDRA_group, levels=lever_order_meddra)~., scales = "free", space = "free")+
scale_x_log10() +
ylab("")+
scale_shape_manual(values=c(1,19))+
scale_colour_manual(guide=FALSE, values=c("green4", "firebrick4"))+
xlab("OR 95%CI (OR>1: TAAR1 agonsits worse)")+
theme_bw()
ggplot(data=safety_primary_plot_2,
aes(y=factor(event_text, level=rev(level_order_2)), x=exp(point),colour=type_outcome, shape=timepoint))+
geom_point(size=safety_primary_2$n, position=position_dodge(width = 0.5))+
geom_errorbar(aes(x=exp(point), xmin=exp(TE.random-1.96*seTE.random),
xmax=exp(TE.random+1.96*seTE.random), colour=type_outcome,shape=timepoint),
width=0, position=position_dodge(width = 0.5))+
geom_vline(xintercept=1, linetype='dashed')+
scale_size_continuous(guide=FALSE)+
facet_grid(factor(MedDRA_group, levels=lever_order_meddra)~., scales = "free", space = "free")+
scale_x_log10() +
ylab("")+
scale_shape_manual(values=c(1,19))+
scale_colour_manual(guide=FALSE, values=c("green4", "firebrick4"))+
xlab("OR 95%CI (OR>1: TAAR1 agonsits worse)")+
theme_bw()
ggplot(data=safety_primary_plot_2,
aes(y=factor(event_text, level=rev(level_order_2)), x=exp(point),colour=type_outcome, shape=timepoint))+
geom_point(size=safety_primary_2$n/100, position=position_dodge(width = 0.5))+
geom_errorbar(aes(x=exp(point), xmin=exp(TE.random-1.96*seTE.random),
xmax=exp(TE.random+1.96*seTE.random), colour=type_outcome,shape=timepoint),
width=0, position=position_dodge(width = 0.5))+
geom_vline(xintercept=1, linetype='dashed')+
scale_size_continuous(guide=FALSE)+
facet_grid(factor(MedDRA_group, levels=lever_order_meddra)~., scales = "free", space = "free")+
scale_x_log10() +
ylab("")+
scale_shape_manual(values=c(1,19))+
scale_colour_manual(guide=FALSE, values=c("green4", "firebrick4"))+
xlab("OR 95%CI (OR>1: TAAR1 agonsits worse)")+
theme_bw()
ggplot(data=safety_primary_plot_2,
aes(y=factor(event_text, level=rev(level_order_2)), x=exp(point),colour=type_outcome, shape=timepoint))+
geom_point(size=safety_primary_2$n/50, position=position_dodge(width = 0.5))+
geom_errorbar(aes(x=exp(point), xmin=exp(TE.random-1.96*seTE.random),
xmax=exp(TE.random+1.96*seTE.random), colour=type_outcome,shape=timepoint),
width=0, position=position_dodge(width = 0.5))+
geom_vline(xintercept=1, linetype='dashed')+
scale_size_continuous(guide=FALSE)+
facet_grid(factor(MedDRA_group, levels=lever_order_meddra)~., scales = "free", space = "free")+
scale_x_log10() +
ylab("")+
scale_shape_manual(values=c(1,19))+
scale_colour_manual(guide=FALSE, values=c("green4", "firebrick4"))+
xlab("OR 95%CI (OR>1: TAAR1 agonsits worse)")+
theme_bw()
safety_primary_2$n
ggplot(data=safety_primary_plot_2,
aes(y=factor(event_text, level=rev(level_order_2)), x=exp(point),colour=type_outcome, shape=timepoint))+
geom_point(aes(size=n), position=position_dodge(width = 0.5))+
geom_errorbar(aes(x=exp(point), xmin=exp(TE.random-1.96*seTE.random),
xmax=exp(TE.random+1.96*seTE.random), colour=type_outcome,shape=timepoint),
width=0, position=position_dodge(width = 0.5))+
geom_vline(xintercept=1, linetype='dashed')+
scale_size_continuous(guide=FALSE, range=c(3,8))+
facet_grid(factor(MedDRA_group, levels=lever_order_meddra)~., scales = "free", space = "free")+
scale_x_log10() +
ylab("")+
scale_shape_manual(values=c(1,19))+
scale_colour_manual(guide=FALSE, values=c("green4", "firebrick4"))+
xlab("OR 95%CI (OR>1: TAAR1 agonsits worse)")+
theme_bw()
ggplot(data=safety_primary_plot_2,
aes(y=factor(event_text, level=rev(level_order_2)), x=exp(point),colour=type_outcome, shape=timepoint))+
geom_point(aes(size=n), position=position_dodge(width = 0.5))+
geom_errorbar(aes(x=exp(point), xmin=exp(TE.random-1.96*seTE.random),
xmax=exp(TE.random+1.96*seTE.random), colour=type_outcome,shape=timepoint),
width=0, position=position_dodge(width = 0.5))+
geom_vline(xintercept=1, linetype='dashed')+
scale_size_continuous(guide=FALSE, range=c(1,3))+
facet_grid(factor(MedDRA_group, levels=lever_order_meddra)~., scales = "free", space = "free")+
scale_x_log10() +
ylab("")+
scale_shape_manual(values=c(1,19))+
scale_colour_manual(guide=FALSE, values=c("green4", "firebrick4"))+
xlab("OR 95%CI (OR>1: TAAR1 agonsits worse)")+
theme_bw()
forest(meta_comp_drug,
col.diamond = "royalblue4",
col.square =   "royalblue1",
rightcols = c("effect", "ci","Overall"),
rightlabs = c("SMD", "95%-CI", "Risk of bias"),
xlim=c(-0.8,0.8),
label.e = unique(meta_comp_drug$data$treat1_new),
label.c=unique(meta_comp_drug$data$treat2_new),
subgroup.hetstat = TRUE, overall.hetstat =FALSE, test.subgroup.random = FALSE,test.subgroup.fixed = FALSE,
overall = FALSE, prediction.subgroup = FALSE,
subgroup = TRUE, fixed=TRUE,
label.left = "Placebo better", label.right="TAAR1 better")
ggplot(data=data_doses[data_doses,], aes(x=dose,e
y=-yi,
ggplot(data=data_doses[data_doses,], aes(x=dose,
y=-yi,
ymin=-yi+1.96*sqrt(vi), ymax=-yi-1.96*sqrt(vi),
group=study_name, colour=study_name))+
geom_pointrange(position=position_dodge(width = 1.2), aes(shape=schedule), size=1)+
xlim(c(0,150))+
coord_cartesian(ylim=c(-0.5,0.5), expand=TRUE)+
xlab("dose (mg//d)")+
ylab("SMD 95%CI")+
scale_shape_manual(values = c(15,0), guide=FALSE)+
geom_hline(yintercept = 0, linetype="dashed")+
facet_wrap(~drug_name,  scales = "free", nrow=2)+
theme_bw()
ggplot(data=data_doses, aes(x=dose,
y=-yi,
ymin=-yi+1.96*sqrt(vi), ymax=-yi-1.96*sqrt(vi),
group=study_name, colour=study_name))+
geom_pointrange(position=position_dodge(width = 1.2), aes(shape=schedule), size=1)+
xlim(c(0,150))+
coord_cartesian(ylim=c(-0.5,0.5), expand=TRUE)+
xlab("dose (mg//d)")+
ylab("SMD 95%CI")+
scale_shape_manual(values = c(15,0), guide=FALSE)+
geom_hline(yintercept = 0, linetype="dashed")+
facet_wrap(~drug_name,  scales = "free", nrow=2)+
theme_bw()
ggplot(data=data_doses, aes(x=dose,
y=-yi,
ymin=-yi+1.96*sqrt(vi), ymax=-yi-1.96*sqrt(vi),
group=study_name, colour=study_name))+
geom_pointrange(position=position_dodge(width = 1.2), aes(shape=schedule), size=1)+
xlim(c(0,150))+
coord_cartesian(ylim=c(-0.5,0.5), expand=TRUE)+
xlab("dose (mg//d)")+
ylab("SMD 95%CI (SMD>0: TAAR1 agonists better")+
scale_shape_manual(values = c(15,0), guide=FALSE)+
geom_hline(yintercept = 0, linetype="dashed")+
facet_wrap(~drug_name,  scales = "free", nrow=2)+
theme_bw()
ggplot(data=data_doses, aes(x=dose,
y=-yi,
ymin=-yi+1.96*sqrt(vi), ymax=-yi-1.96*sqrt(vi),
group=study_name, colour=study_name))+
geom_pointrange(position=position_dodge(width = 1.2), aes(shape=schedule), size=1)+
xlim(c(0,150))+
coord_cartesian(ylim=c(-0.5,0.5), expand=TRUE)+
xlab("dose (mg//d)")+
ylab("SMD 95%CI (SMD>0: TAAR1 agonists better")+
scale_shape_manual(values = c(15,0), guide=TRUE)+
geom_hline(yintercept = 0, linetype="dashed")+
facet_wrap(~drug_name,  scales = "free", nrow=2)+
theme_bw()
ggplot(data=data_doses, aes(x=dose,
y=-yi,
ymin=-yi+1.96*sqrt(vi), ymax=-yi-1.96*sqrt(vi),
group=study_name, colour=study_name))+
geom_pointrange(position=position_dodge(width = 1.2), aes(shape=schedule), size=1)+
xlim(c(0,150))+
coord_cartesian(ylim=c(-0.5,0.5), expand=TRUE)+
xlab("dose (mg//d)")+
ylab("SMD 95%CI (SMD>0: TAAR1 agonists better")+
scale_shape_manual(values = c(15,0))+
geom_hline(yintercept = 0, linetype="dashed")+
facet_wrap(~drug_name,  scales = "free", nrow=2)+
theme_bw()
studies_to_plot<-studies[order(studies$Name)]
studies_to_plot<-studies[order(studies$Name),]
studies_to_plot<-studies[order(studies$Name),]
knitr::kable(studies_to_plot[, 1:14])
